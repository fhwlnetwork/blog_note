import{_ as h}from"./chunks/ArticleMetadata.EniEqKqn.js";import{_ as p,D as o,o as e,c as r,I as c,w as d,k as t,a as k,R as g,b as m,e as u}from"./chunks/framework.FVQzxbLi.js";import"./chunks/md5.RtphNWHi.js";const P=JSON.parse('{"title":"centos安装docker","description":"","frontmatter":{"title":"centos安装docker","author":"吴建华","date":"2021/01/16 17:58","categories":["docker基础篇"],"tags":["centos","docker","linux"]},"headers":[],"relativePath":"courses/cloud/01-docker基础篇/02-centos.md","filePath":"courses/cloud/01-docker基础篇/02-centos.md","lastUpdated":1702561947000}'),y={name:"courses/cloud/01-docker基础篇/02-centos.md"},F=t("h1",{id:"centos安装docker",tabindex:"-1"},[k("centos安装docker "),t("a",{class:"header-anchor",href:"#centos安装docker","aria-label":'Permalink to "centos安装docker"'},"​")],-1),b=g(`<h2 id="_1、前提说明" tabindex="-1">1、前提说明 <a class="header-anchor" href="#_1、前提说明" aria-label="Permalink to &quot;1、前提说明&quot;">​</a></h2><p>目前，CentOS 仅发行版本中的内核支持 Docker。Docker 运行在CentOS 7 (64-bit)上，</p><p>要求系统为64位、Linux系统内核版本为 3.8以上，这里选用Centos7.x</p><blockquote><p><strong>查看自己的内核</strong></p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /etc/redhat-release</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">##uname命令用于打印当前系统相关信息（内核版本号、硬件架构、主机名称和操作系统类型等）。 </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">uname</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -r</span></span></code></pre></div></blockquote><p><img src="https://cdn.jsdelivr.net/gh/fhwlnetwork/blos_imgs/img/20220203113847.png" alt=""></p><h2 id="_2、卸载旧版本" tabindex="-1">2、卸载旧版本 <a class="header-anchor" href="#_2、卸载旧版本" aria-label="Permalink to &quot;2、卸载旧版本&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> yum</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> remove</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> docker</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">                  docker-client</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">                  docker-client-latest</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">                  docker-common</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">                  docker-latest</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">                  docker-latest-logrotate</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">                  docker-logrotate</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">                  docker-engine</span></span></code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/fhwlnetwork/blos_imgs/img/202202031225565.png" alt=""></p><h2 id="_3、yum安装gcc相关" tabindex="-1">3、yum安装gcc相关 <a class="header-anchor" href="#_3、yum安装gcc相关" aria-label="Permalink to &quot;3、yum安装gcc相关&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># yum install -y gcc  gcc-c++</span></span></code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/fhwlnetwork/blos_imgs/img/202202031229269.png" alt=""></p><p>4、安装需要的软件包</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># yum install -y yum-utils</span></span></code></pre></div><h2 id="_5、设置stable镜像仓库" tabindex="-1">5、设置stable镜像仓库 <a class="header-anchor" href="#_5、设置stable镜像仓库" aria-label="Permalink to &quot;5、设置stable镜像仓库&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span></span></code></pre></div><blockquote><p>说明：</p><p>官方文档要求配置的源：yum-config-manager --add-repo <a href="https://download.docker.com/linux/centos/docker-ce.repo" target="_blank" rel="noreferrer">https://download.docker.com/linux/centos/docker-ce.repo</a></p><p>由于是海外资源，加载资源时容易404，推荐使用国内源，本文档使用阿里源</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/fhwlnetwork/blos_imgs/img/202202032147896.png" alt=""></p><h2 id="_6、更新yum软件包索引" tabindex="-1">6、更新yum软件包索引 <a class="header-anchor" href="#_6、更新yum软件包索引" aria-label="Permalink to &quot;6、更新yum软件包索引&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># yum makecache fast</span></span></code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/fhwlnetwork/blos_imgs/img/202202032147919.png" alt=""></p><h2 id="_7、安装docker-ce" tabindex="-1">7、安装Docker ce <a class="header-anchor" href="#_7、安装docker-ce" aria-label="Permalink to &quot;7、安装Docker ce&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># yum -y install docker-ce docker-ce-cli containerd.io</span></span></code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/fhwlnetwork/blos_imgs/img/202202032147941.png" alt=""></p><h2 id="_8、启动docker" tabindex="-1">8、启动docker <a class="header-anchor" href="#_8、启动docker" aria-label="Permalink to &quot;8、启动docker&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># systemctl start docker</span></span></code></pre></div><h3 id="验证" tabindex="-1">验证 <a class="header-anchor" href="#验证" aria-label="Permalink to &quot;验证&quot;">​</a></h3><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># docker version</span></span></code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/fhwlnetwork/blos_imgs/img/202202032147964.png" alt=""></p><h2 id="、9、卸载" tabindex="-1">、9、卸载 <a class="header-anchor" href="#、9、卸载" aria-label="Permalink to &quot;、9、卸载&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># systemctl stop docker</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># yum remove docker-ce docker-ce-cli containerd.io</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># rm -rf /var/lib/docker</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># rm -rf /var/lib/containerd</span></span></code></pre></div><h2 id="_10、-配置镜像加速器" tabindex="-1">## 10、 配置镜像加速器 <a class="header-anchor" href="#_10、-配置镜像加速器" aria-label="Permalink to &quot;## 10、 配置镜像加速器&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /etc/docker</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> tee</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /etc/docker/daemon.json</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &lt;&lt;-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#ADBAC7;">EOF</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">  &quot;registry-mirrors&quot;: [&quot;https://rcl1cdp5.mirror.aliyuncs.com&quot;]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">}</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#ADBAC7;">EOF</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> daemon-reload</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> docker</span></span></code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/fhwlnetwork/blos_imgs/img/202202032147985.png" alt=""></p>`,33);function v(s,C,_,D,f,q){const n=h,l=o("ClientOnly");return e(),r("div",null,[F,c(l,null,{default:d(()=>{var a,i;return[(((a=s.$frontmatter)==null?void 0:a.aside)??!0)&&(((i=s.$frontmatter)==null?void 0:i.showArticleMetadata)??!0)?(e(),m(n,{key:0,article:s.$frontmatter},null,8,["article"])):u("",!0)]}),_:1}),b])}const B=p(y,[["render",v]]);export{P as __pageData,B as default};
