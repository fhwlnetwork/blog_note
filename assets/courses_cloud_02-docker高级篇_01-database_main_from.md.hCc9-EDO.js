import{_ as h}from"./chunks/ArticleMetadata.Sb1DYAHo.js";import{_ as p,D as k,o as n,c as r,I as d,w as o,k as l,a as c,R as g,b as y,e as m}from"./chunks/framework.FVQzxbLi.js";import"./chunks/md5.RtphNWHi.js";const x=JSON.parse('{"title":"数据库主从","description":"","frontmatter":{"title":"数据库主从","author":"吴建华","date":"2022/10/22 21:25","categories":["docker高级篇"],"tags":["docker","Linux","mysql"]},"headers":[],"relativePath":"courses/cloud/02-docker高级篇/01-database_main_from.md","filePath":"courses/cloud/02-docker高级篇/01-database_main_from.md","lastUpdated":1702605175000}'),F={name:"courses/cloud/02-docker高级篇/01-database_main_from.md"},C=l("h1",{id:"数据库主从",tabindex:"-1"},[c("数据库主从 "),l("a",{class:"header-anchor",href:"#数据库主从","aria-label":'Permalink to "数据库主从"'},"​")],-1),A=g(`<h2 id="_1、新建主服务器容器实例3307" tabindex="-1">1、新建主服务器容器实例3307 <a class="header-anchor" href="#_1、新建主服务器容器实例3307" aria-label="Permalink to &quot;1、新建主服务器容器实例3307&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 3307</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:3306</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mysql-master</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-v </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/mydata/mysql-master/log:/var/log/mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-v </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/mydata/mysql-master/data:/var/lib/mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-v </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/mydata/mysql-master/conf:/etc/mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-e </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">MYSQL_ROOT_PASSWORD=root</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">  \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-d </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">mysql:5.7</span></span></code></pre></div><h2 id="_2、进入-mydata-mysql-master-conf目录下新建my-cnf" tabindex="-1">2、进入/mydata/mysql-master/conf目录下新建my.cnf <a class="header-anchor" href="#_2、进入-mydata-mysql-master-conf目录下新建my-cnf" aria-label="Permalink to &quot;2、进入/mydata/mysql-master/conf目录下新建my.cnf&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[mysqld]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">## 设置server_id，同一局域网中需要唯一</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">server_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">101</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">## 指定不需要同步的数据库名称</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">binlog-ignore-db</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">mysql</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">## 开启二进制日志功能</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">log-bin</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">mall-mysql-bin</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">## 设置二进制日志使用内存大小（事务）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">binlog_cache_size</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">M</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">## 设置使用的二进制日志格式（mixed,statement,row）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">binlog_format</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">mixed</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">## 二进制日志过期清理时间。默认值为0，表示不自动清理。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">expire_logs_days</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">7</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">## 跳过主从复制中遇到的所有错误或指定类型的错误，避免slave端复制中断。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">## 如：1062错误是指一些主键重复，1032错误是因为主从数据库数据不一致</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">slave_skip_errors</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1062</span></span></code></pre></div><h2 id="_3、修改完配置后重启master实例" tabindex="-1">3、修改完配置后重启master实例 <a class="header-anchor" href="#_3、修改完配置后重启master实例" aria-label="Permalink to &quot;3、修改完配置后重启master实例&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"># docker restart mysql-master</span></span></code></pre></div><h2 id="_4、进入mysql-master容器" tabindex="-1">4、进入mysql-master容器 <a class="header-anchor" href="#_4、进入mysql-master容器" aria-label="Permalink to &quot;4、进入mysql-master容器&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">[root@wjh </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]# docker exec -it mysql-master /bin/bash</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">root@a856341f5cb9:/#</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -uroot</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -proot</span></span></code></pre></div><h2 id="_5、master容器实例内创建数据同步用户" tabindex="-1">5、master容器实例内创建数据同步用户 <a class="header-anchor" href="#_5、master容器实例内创建数据同步用户" aria-label="Permalink to &quot;5、master容器实例内创建数据同步用户&quot;">​</a></h2><div class="language-SQL vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">SQL</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">mysql</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> CREATE</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> USER </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;slave&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;%&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> IDENTIFIED </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">BY</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;123456&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Query OK, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> rows</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> affected (</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">00</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sec)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">mysql</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> GRANT</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> REPLICATION SLAVE, REPLICATION CLIENT </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">ON</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> TO</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;slave&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">@</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;%&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">Query OK, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> rows</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> affected (</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">00</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> sec)</span></span></code></pre></div><h2 id="_6、新建从服务器容器实例3308" tabindex="-1">6、新建从服务器容器实例3308 <a class="header-anchor" href="#_6、新建从服务器容器实例3308" aria-label="Permalink to &quot;6、新建从服务器容器实例3308&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 3308</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">:3306</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mysql-slave</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-v </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/mydata/mysql-slave/log:/var/log/mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-v </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/mydata/mysql-slave/data:/var/lib/mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-v </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">/mydata/mysql-slave/conf:/etc/mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;"> \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-e </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">MYSQL_ROOT_PASSWORD=root</span><span style="--shiki-light:#005CC5;--shiki-dark:#F47067;">  \\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">-d </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">mysql:5.7</span></span></code></pre></div><h2 id="_7、进入-mydata-mysql-slave-conf目录下新建my-cnf" tabindex="-1">7、进入/mydata/mysql-slave/conf目录下新建my.cnf <a class="header-anchor" href="#_7、进入-mydata-mysql-slave-conf目录下新建my-cnf" aria-label="Permalink to &quot;7、进入/mydata/mysql-slave/conf目录下新建my.cnf&quot;">​</a></h2><div class="language-\\SH vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">\\SH</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span>[mysqld]</span></span>
<span class="line"><span>## 设置server_id，同一局域网中需要唯一</span></span>
<span class="line"><span>server_id=102</span></span>
<span class="line"><span>## 指定不需要同步的数据库名称</span></span>
<span class="line"><span>binlog-ignore-db=mysql  </span></span>
<span class="line"><span>## 开启二进制日志功能，以备Slave作为其它数据库实例的Master时使用</span></span>
<span class="line"><span>log-bin=mall-mysql-slave1-bin  </span></span>
<span class="line"><span>## 设置二进制日志使用内存大小（事务）</span></span>
<span class="line"><span>binlog_cache_size=1M  </span></span>
<span class="line"><span>## 设置使用的二进制日志格式（mixed,statement,row）</span></span>
<span class="line"><span>binlog_format=mixed  </span></span>
<span class="line"><span>## 二进制日志过期清理时间。默认值为0，表示不自动清理。</span></span>
<span class="line"><span>expire_logs_days=7  </span></span>
<span class="line"><span>## 跳过主从复制中遇到的所有错误或指定类型的错误，避免slave端复制中断。</span></span>
<span class="line"><span>## 如：1062错误是指一些主键重复，1032错误是因为主从数据库数据不一致</span></span>
<span class="line"><span>slave_skip_errors=1062  </span></span>
<span class="line"><span>## relay_log配置中继日志</span></span>
<span class="line"><span>relay_log=mall-mysql-relay-bin  </span></span>
<span class="line"><span>## log_slave_updates表示slave将复制事件写进自己的二进制日志</span></span>
<span class="line"><span>log_slave_updates=1  </span></span>
<span class="line"><span>## slave设置为只读（具有super权限的用户除外）</span></span>
<span class="line"><span>read_only=1</span></span></code></pre></div><h2 id="_8、修改完配置后重启slave实例" tabindex="-1">8、修改完配置后重启slave实例 <a class="header-anchor" href="#_8、修改完配置后重启slave实例" aria-label="Permalink to &quot;8、修改完配置后重启slave实例&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mysql-slave</span></span></code></pre></div><h2 id="_9、在主数据库中查看主从同步状态" tabindex="-1">9、在主数据库中查看主从同步状态 <a class="header-anchor" href="#_9、在主数据库中查看主从同步状态" aria-label="Permalink to &quot;9、在主数据库中查看主从同步状态&quot;">​</a></h2><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">show </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">master</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> status</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span></code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/fhwlnetwork/blos_imgs/img/202202061958972.png" alt=""></p><h2 id="_10、进入mysql-slave容器" tabindex="-1">10、进入mysql-slave容器 <a class="header-anchor" href="#_10、进入mysql-slave容器" aria-label="Permalink to &quot;10、进入mysql-slave容器&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -it</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> mysql-slave</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> /bin/mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -uroot</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -proot</span></span></code></pre></div><h2 id="_11、在从数据库中配置主从复制" tabindex="-1">11、在从数据库中配置主从复制 <a class="header-anchor" href="#_11、在从数据库中配置主从复制" aria-label="Permalink to &quot;11、在从数据库中配置主从复制&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">mysql</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -uroot</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> -proot</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">change</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> master</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> master_host=&#39;10.0.0.200&#39;,master_user=&#39;slave&#39;,master_password=&#39;123456&#39;,master_port=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">3307</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,master_log_file=&#39;mall-mysql-bin.000001&#39;,master_log_pos=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">154</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">,master_connect_retry=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">30</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span></code></pre></div><blockquote><p>主从复制命令参数说明</p><p>master_host：主数据库的IP地址；</p><p>master_port：主数据库的运行端口；</p><p>master_user：在主数据库创建的用于同步数据的用户账号；</p><p>master_password：在主数据库创建的用于同步数据的用户密码；</p><p>master_log_file：指定从数据库要复制数据的日志文件，通过查看主数据的状态，获取File参数；</p><p>master_log_pos：指定从数据库从哪个位置开始复制数据，通过查看主数据的状态，获取Position参数；</p><p>master_connect_retry：连接失败重试的时间间隔，单位为秒。</p></blockquote><h2 id="_12、在从数据库中查看主从同步状态" tabindex="-1">12、在从数据库中查看主从同步状态 <a class="header-anchor" href="#_12、在从数据库中查看主从同步状态" aria-label="Permalink to &quot;12、在从数据库中查看主从同步状态&quot;">​</a></h2><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">mysql</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> show slave </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">status</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> \\G;</span></span></code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/fhwlnetwork/blos_imgs/img/202202062004684.png" alt=""></p><h2 id="_13、在-a-style-color-red-从数据库-a-中开启主从同步" tabindex="-1">13、在<code>&lt;a style=&quot;color:red&quot;&gt;</code>从数据库<code>&lt;/a&gt;</code>中开启主从同步 <a class="header-anchor" href="#_13、在-a-style-color-red-从数据库-a-中开启主从同步" aria-label="Permalink to &quot;13、在\`&lt;a style=&quot;color:red&quot;&gt;\`从数据库\`&lt;/a&gt;\`中开启主从同步&quot;">​</a></h2><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">mysql&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> slave</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span></code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/fhwlnetwork/blos_imgs/img/202202062025921.png" alt=""></p>`,30);function D(s,u,_,v,b,q){const t=h,e=k("ClientOnly");return n(),r("div",null,[C,d(e,null,{default:o(()=>{var a,i;return[(((a=s.$frontmatter)==null?void 0:a.aside)??!0)&&(((i=s.$frontmatter)==null?void 0:i.showArticleMetadata)??!0)?(n(),y(t,{key:0,article:s.$frontmatter},null,8,["article"])):m("",!0)]}),_:1}),A])}const P=p(F,[["render",D]]);export{x as __pageData,P as default};
